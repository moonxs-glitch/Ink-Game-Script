local repo = "https://raw.githubusercontent.com/javierfabian828-maker/Obsidian/main/"
local Library = loadstring(game:HttpGet(repo .. "Library.lua"))()
local ThemeManager = loadstring(game:HttpGet(repo .. "addons/ThemeManager.lua"))()
local SaveManager = loadstring(game:HttpGet(repo .. "addons/SaveManager.lua"))()

local Options = Library.Options
local Toggles = Library.Toggles

Library.ForceCheckbox = false
Library.ShowToggleFrameInKeybinds = true

local Window = Library:CreateWindow({
	Title = "Moon Hub",
	Footer = "version: tester",
	NotifySide = "Right",
	ToggleKeybind = Enum.KeyCode.LeftAlt,
	Font = Enum.Font.Fantasy,
	ShowCustomCursor = true,
})

local Tabs = {
	Main = Window:AddTab("Main"),
	UISettings = Window:AddTab("UI Settings"),
}

-- Red Light Green Light (Left)
local RLGLGroup = Tabs.Main:AddLeftGroupbox("Red Light Green Light", "moon")
-- Insert RLGL logic here

-- Auto Dalgona (Left)
local DalgonaGroup = Tabs.Main:AddLeftGroupbox("Auto Dalgona", "moon")
-- Insert Auto Dalgona logic here

-- Jump Rope (Left)
local JumpRopeGroup = Tabs.Main:AddLeftGroupbox("Jump Rope", "moon")
-- Insert Jump Rope logic here

-- Lights Out (Right)
local LightsOutGroup = Tabs.Main:AddRightGroupbox("Lights Out", "moon")
-- Insert Lights Out logic here

-- Hide & Seek (Right)
local HideSeekGroup = Tabs.Main:AddRightGroupbox("Hide & Seek", "moon")
-- Insert Hide & Seek logic here

-- UI Settings
local MenuGroup = Tabs.UISettings:AddLeftGroupbox("Menu", "wrench")

MenuGroup:AddToggle("KeybindMenuOpen", {
	Default = Library.KeybindFrame.Visible,
	Text = "Open Keybind Menu",
	Callback = function(value)
		Library.KeybindFrame.Visible = value
	end,
})

MenuGroup:AddToggle("ShowCustomCursor", {
	Text = "Custom Cursor",
	Default = true,
	Callback = function(Value)
		Library.ShowCustomCursor = Value
	end,
})

MenuGroup:AddDropdown("NotificationSide", {
	Values = { "Left", "Right" },
	Default = "Right",
	Text = "Notification Side",
	Callback = function(Value)
		Library:SetNotifySide(Value)
	end,
})

MenuGroup:AddDropdown("DPIDropdown", {
	Values = { "50%", "75%", "100%", "125%", "150%", "175%", "200%" },
	Default = "100%",
	Text = "DPI Scale",
	Callback = function(Value)
		Value = Value:gsub("%%", "")
		local DPI = tonumber(Value)
		Library:SetDPIScale(DPI)
	end,
})

MenuGroup:AddDivider()
MenuGroup:AddLabel("Menu bind")
	:AddKeyPicker("MenuKeybind", { Default = "LeftAlt", NoUI = true, Text = "Menu keybind" })

MenuGroup:AddButton("Unload", function()
	Library:Unload()
end)

Library.ToggleKeybind = Options.MenuKeybind

-- Theme & SaveManager
ThemeManager:SetLibrary(Library)
SaveManager:SetLibrary(Library)
SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({ "MenuKeybind" })

ThemeManager:SetFolder("Moon Hub")

local placeId = game.PlaceId

if placeId == 125009265613167 then
	SaveManager:SetFolder("Moon Hub/Game")
	SaveManager:SetSubFolder("125009265613167")
elseif placeId == 122816944483266 then
	SaveManager:SetFolder("Moon Hub/Ink Game 100 Player Lobby")
	SaveManager:SetSubFolder("122816944483266")
else
	SaveManager:SetFolder("Moon Hub/Other Game")
	SaveManager:SetSubFolder(tostring(placeId))
end

SaveManager:BuildConfigSection(Tabs.UISettings)
ThemeManager:ApplyToTab(Tabs.UISettings)
SaveManager:LoadAutoloadConfig()
